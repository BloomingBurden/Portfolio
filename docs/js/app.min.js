(()=>{"use strict";window.addEventListener("load",(()=>{const e=document.querySelectorAll(".preview__piece--left"),t=document.querySelectorAll(".preview__piece--right");e.forEach((e=>e.style.animationName="titleMoveLeft")),t.forEach((e=>e.style.animationName="titleMoveRight"))})),(()=>{const e=document.querySelector(".menu__button"),t=document.querySelector(".menu"),n=document.querySelector(".wrapper"),o=document.querySelector(".preview");e.addEventListener("click",(i=>{i.target.closest(".menu__button")&&(t.classList.contains("menu--opened")?(e.textContent="Меню",e.removeAttribute("style"),n.style.top=0,o&&(o.style.top=0),t.classList.remove("menu--opened"),t.classList.add("menu--closed")):t.classList.contains("menu--closed")&&(e.textContent="Закрыть",e.style.background="blue",o&&(o.style.top="-60vh"),n.style.top="-60vh",t.classList.remove("menu--closed"),t.classList.add("menu--opened")))}))})(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=document.querySelector(".menu"),t=document.querySelector(".menu__list"),n=()=>{let e=Array.from(t.children).reduce(((e,t)=>e+t.getBoundingClientRect().width+parseFloat(window.getComputedStyle(t).marginRight)),0);return e-=window.innerWidth,e+40};let o=n(),i=0;CSS.supports("touch-action","none")?e.addEventListener("pointerdown",(n=>{let s=n.pageX;e.ondragstart=()=>!1;const a=()=>{e.removeEventListener("pointermove",r),document.removeEventListener("pointerup",a)},r=((e,t=300)=>{let n=!1;return(...o)=>{!0!==n&&(n=!0,e(...o),setTimeout((()=>n=!1),t))}})((e=>{const n=s-e.pageX;i+=n,s=e.pageX,i>0&&(i=0),Math.abs(i)>=o&&(i=-o),t.style.transform=`translateX(${i}px)`}),50);document.addEventListener("pointerup",a),e.addEventListener("pointerleave",a),e.addEventListener("pointermove",r)})):e.classList.add("no-touch"),window.addEventListener("resize",(()=>{o=n()}));const s={letsgo:{title:"Letsgo",images:["letsgo-m","letsgo-d","travel@2x"],descr:"Landing page - адаптивный/отзывчивый сайт, реализованный на grid и flexbox без тяжелых библиотек и плагинов. Весь функционал написан на чистом JS для оптимизации кода под google pagespeed. Подготовлены специальные изображения для ретины, задействовано современное расширение для изображений .webp.",text:["HTML - SCSS - JS - GULP - Яндекс.карта","7/10"],site:"#",video:"letsgo-video.mp4",poster:""},kotyagram:{title:"Kotyagram",images:["kotyagram-m","kotyagram-d","photogram@2x"],descr:"Веб-приложение - загружай, редактируй, комментируй, ставь лайки на фотографии домашних любимцев. Делись впечатлениями с другими, сортируй изображения по популярности или лайкам. Сайт полностью реализован на чистом JS, без фреймворков и библиотек. Полная отзывчивость под все разрешения.",text:["HTML - SCSS - JS - GULP - JSON - PHP","8/10"],site:"#",video:"photogram-video.mp4",poster:""},taptim:{title:"Таптым",images:["taptim-m","taptim-d","taptim@2x"],descr:'Landing page - сайт визитка для мобильного приложения. Лаконичный, но не самый простой сайт "Таптым". Много нестандартных блоков вразброс реализуются с помощью гридов. Адаптивность под разрешения 390px, 768px. Много svg графиик - иконок.',text:["HTML - SCSS - JS - GULP - SWIPER","5/10"],site:"#",video:"taptim-video.mp4",poster:""},alira:{title:"Alira",images:["alira-m","alira-d","alira@2x"],descr:"Landing page - адаптивный сайт из 10 блоков. Из интересного: на сайте задействуется таймер, написанный на чистом JS. Оставшиеся время можно спокойно регулировать.",text:["HTML - SCSS - JS - GULP - BOOTSTRAP","6/10"],site:"#",video:"",poster:"alira-video"},supplement:{title:"Supplement",images:["supplement-d","supplement-d","supplement@2x"],descr:"Landing page - классический адаптивный сайт.  Форма для связи, таблица с данными, swiper, svg спрайт",text:["HTML - SCSS - JS - GULP - SWIPER - BOOTSTRAP","5/10"],site:"#",video:"",poster:"supplement-video"},fashion:{title:"Fashion",images:["fashion-m","fashion-d","fashion@2x"],descr:"Адаптивная верстка главной страницы интернет магазина. Для шапки используется Swiper и самописный код на таймер. Сетка главного контента реализуется с помощью grid. На сайте много изображений, поэтому используем расширенный тег picture, для подключения современного формата .webp и х2 изображений под ретину.",text:["HTML - SCSS - JS - GULP - SWIPER","7/10"],site:"#",video:"",poster:"fashion-video"},imwoman:{title:"I am woman",images:["Imwoman-d","Imwoman-d","woman@2x"],descr:"Адаптивная верстка главной страницы интернет магазина. Страница в стиле минимализма с формой обратной связи",text:["HTML - SCSS - JS - GULP","4/10"],site:"#",video:"",poster:"imwoman-video"},revista:{title:"Revista",images:["revista-m","revista-d","pop@2x"],descr:"Сайт-визитка. В шапке используем бургер меню. Основная сетка и весь контент сделаны на гридах. Группа видео переключается с помощью Swiper",text:["HTML - SCSS - JS - GULP - SWIPER","5/10"],site:"#",video:"",poster:"revista-video"},gordium:{title:"Gordium",images:["gordium-m","gordium-d","gordium@2x"],descr:"Gordium - одностраничный сайт трейдинговой компании. Сетка построена на grid и flexbox. Элементы адаптивно-отзывчивые. Задействованы два плагина: swiper и mask, весь остальной функционал написан на чистом JS. Карта мира из SVG графики.",text:["HTML - SCSS - JS - GULP - SWIPER - MASK - POPUP","6/10"],site:"https://bloomingburden.github.io/gordium",video:"",poster:"gordium-video"}},a=document.querySelector(".gallery");a&&a.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".gallery__item");if(!t)return;const n=t.dataset.popupItem;n&&(document.body.style.overflow="hidden",document.body.classList.add("stop-scrolling"),(e=>{const t=document.createElement("section");t.classList.add("popup"),t.innerHTML=e,t.style.scrollBehavior="smooth",document.body.prepend(t);const n=document.querySelector(".popup__close");(e=>{const t=document.querySelectorAll("[data-move-effects]"),n={top:{next:"translateY(70px)",back:"translateY(0)"},left:{next:"translateX(-100px)",back:"translateX(0)"},right:{next:"translateX(100px)",back:"translateX(0)"},bottom:{next:"translateY(-70px)",back:"translateY(0)"},scale:{next:"scale(0.5)",back:"scale(1)"}},o=(e,t)=>{const n=["UL","DIV","P","H1","H2","H3","H4","LI","BUTTON","A"];if(0===e.children.length)if(n.includes(e.tagName)){const n=window.pageYOffset+e.getBoundingClientRect().top,o=window.pageYOffset+window.innerHeight;i(e,n,o,t)}else if(n.includes(e.parentElement.tagName)){const n=window.pageYOffset+e.parentElement.getBoundingClientRect().top,o=window.pageYOffset+window.innerHeight;i(e.parentElement,n,o,t)}for(let n of e.children)o(n,t)},i=(e,t,o,i)=>{o>=t+100&&(e.style.transform=`${n[i].back}`,e.style.opacity=1,e.style.visibility="visible",e.style.willChange="transform"),o<=t&&(e.style.transition="1s ease",e.style.transform=n[i].next,e.style.opacity=0,e.style.visibility="hidden",e.style.willChange="auto")};e.addEventListener("scroll",(e=>{t.forEach((e=>{const t=window.pageYOffset+e.getBoundingClientRect().top,s=window.pageYOffset+window.innerHeight,a=e.dataset.moveEffects.split(","),r=!!a[1]&&a[1].trim(),l=a[0];n[l]&&("true"===r?o(e,l):i(e,t,s,l))}))}))})(t),n.addEventListener("click",(()=>{var e;(e=t).style.animation="popupDown 1.5s ease forwards",document.body.removeAttribute("style"),document.body.classList.remove("stop-scrolling"),setTimeout((()=>{e.remove()}),1600)}))})((e=>{const t={img:"./img/popup/",video:"./video/popup/",other:"./img/popup/popup-bg/"},n=((e,t)=>e.video?`\n        <video src="${t.video+e.video}" loop="true" muted="" autoplay="" arial-label="Видео"></video>`:`<picture>\n            <source media="(min-width: 768px)" type="image/webp" srcset="${t.img+e.poster}-d.webp">\n            <source media="(min-width: 768px)" srcset="${t.img+e.poster}-d.jpg">\n            <source type="image/webp" srcset="${t.img+e.poster}-m.webp">\n            <img src="${t.img+e.poster}-m.jpg" alt="Фоновое изображение loading="lazy" ${e.title}">\n        </picture>`)(e,t);return`\n        <header class="popup__header">\n            <div class="popup__body">\n                <picture>\n                    <source media="(min-width: 768px)" type="image/webp" srcset="${t.img+e.images[1]}.webp">\n                    <source media="(min-width: 768px)" srcset="${t.img+e.images[1]}.jpg">\n                    <source type="image/webp" srcset="${t.img+e.images[0]}.webp">\n                    <img class="popup__img" src="${t.img+e.images[0]}.jpg"  alt="Изображение сайта">\n                </picture>\n            </div>\n        </header>\n        <div class="popup__main">\n            <div class="popup__content">\n                <div class="popup__top" data-move-effects="scale, true">\n                    <h2 class="popup__title">${e.title}</h2>\n                    <p class="popup__text">${e.descr}</p>\n                </div>\n                <a href="${e.site}" target="_blank" class="popup__visit">Посетить образец сайта</a>\n                <div class="popup__bottom">\n                    <div class="popup__item" data-move-effects="left, true">\n                        <h3 class="popup__title">Технологии: </h3>\n                        <p class="popup__addition">${e.text[0]}</p>\n                    </div>\n                    <div class="popup__item" data-move-effects="right, true">\n                        <h3 class="popup__title">Сложность: </h3>\n                        <p class="popup__addition">${e.text[1]}</p>\n                    </div>\n                </div>\n            </div>\n            <div class="popup__body-img">\n                <picture>\n                    <source type="image/webp" srcset="${t.other+e.images[2]}.webp">\n                    <img src="${t.other+e.images[2]}.jpg" loading="lazy" alt="Фоновое изображение сайта">\n                </picture>\n            </div>\n        </div>\n        <footer class="popup__footer">\n            ${n}\n        </footer>\n        <button class="popup__close">Закрыть</button>\n    `})(s[n])))}));const r=document.querySelectorAll(".about__skill"),l=document.querySelectorAll(".about__frame"),d=[];let p=-1300,c=-260,m=!1;const u=()=>{let e=document.documentElement.scrollTop,t=c-e;c=e,l.forEach(((e,n)=>{d.push(n*p+p),d[n]+=-5*t;let o=d[n]<Math.abs(p)/2.5?1:0;e.style.transform=`translateZ(${d[n]}px)`,e.style.opacity=`${o}`,e.classList.contains("about__frame--list")&&e.getBoundingClientRect().top+100<=0&&(m||r.forEach(((e,t)=>{const n=.5*t;e.classList.add("about__skill--anime"),e.style.animationDelay=`${n}s`})),m=!0)}))};u(),window.addEventListener("scroll",u);const g=document.querySelector(".gallery__inner");let v=!1;window.innerWidth>=1050&&setInterval((()=>{document.body.classList.contains("stop-scrolling")||v||window.scrollBy(0,1)}),30);let h=[],y=[],w=!1;const f=()=>{const e=document.querySelectorAll(".gallery__one"),t=document.querySelectorAll(".gallery__two");if(window.innerWidth<768){if(w)return;(e.length>=2||t.length>=2)&&(h=Array.from(e[1].children),y=Array.from(t[1].children),e[1].style.display="none",t[1].style.display="none",e[0].append(...h),t[0].append(...y),w=!0)}else{if(!w)return;0!==e[1].children.length&&0!==t[1].children.length||(e[1].style.display="initial",t[1].style.display="initial",e[1].append(...h),t[1].append(...y),w=!1)}};f();const S=()=>{let e=[];for(let t=0;t<g.children.length;t++){const n=g.children[t],o=g.children[t].getBoundingClientRect().height,i=g.getBoundingClientRect().height-o;o<=10||e.push({elem:n,gap:i,height:o})}e.sort(((e,t)=>e.gap<t.gap));let t=e[0].gap;return e.forEach(((e,n)=>{0!==n&&(e.gap=t-e.gap)})),e[0].gap=0,window.innerHeight>e[0].height?((e=>{e.forEach((e=>{e.elem.style.transform="translateY(0px) translateZ(0px)"})),g.style.height="auto"})(e),!1):(g.style.height=`${e[0].height}px`,e)};let _=!!g&&S();const L=e=>{const t=g.getBoundingClientRect().top;if(_)for(let e of _){let n=e.gap/(_[0].height-window.innerHeight);t>=0&&(n=0),e.elem.style.transform=`translateY(${n*t}px) translateZ(0px)`}},b=()=>{f(),_=S()};window.addEventListener("load",(()=>{g&&(window.addEventListener("scroll",L),window.addEventListener("resize",b),document.body.classList.contains("index-body")&&(g.addEventListener("mouseover",(()=>v=!0)),g.addEventListener("mouseout",(()=>v=!1))))}))})();